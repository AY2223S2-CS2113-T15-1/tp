@startuml
hide footbox

participant ":FileManager" as fm
participant ":FileEncoder" as fe
participant ":SingleFile" as sf
participant ":FileWriter" as fw
participant ":BufferedWriter" as bw
participant ":File" as f

activate fm
-> fm : addEntry
fm -> fe : encodeCS2040CFile
fe --> fm : encodedCS2040CFile: String
fm -> sf : writeCS2040CFileToFile
activate sf
    opt file does not exist
        fm -> sf : recreateFile()
        sf --> fm
        opt file created successfully
            sf -> sf : overwriteFile()
            activate sf
            sf -> fw **
            activate fw
            fw -> bw **
            activate bw
            loop for each String in storedRawData.values()
                bw -> f : write(string: String)
                activate f
                f --> sf
                deactivate f
            end
        end
            deactivate sf
            destroy bw
            destroy fw
        end

sf -> fw **
activate fw
fw -> bw **
activate bw
bw -> f : write(encodedCS2040CFile: String)
activate f
bw -> f : newLine()
bw -> bw : close()
activate bw
deactivate bw
destroy bw
fw -> fw : close()
activate fw
deactivate fw
destroy fw
f --> sf
deactivate f
sf --> fm
deactivate sf
@enduml