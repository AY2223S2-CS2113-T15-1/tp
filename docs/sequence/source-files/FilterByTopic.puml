@startuml
activate FilterCommand

-> FilterCommand : execute()
    opt topicManger.isEmpty()
        FilterCommand -> Ui : printFilterEmpty()
        activate Ui
        return
        FilterCommand -> Buffer : updateBuffer(filteredFiles : ArrayList<CS2040CFile>)
        activate Buffer
        return
    end
    alt keyWord.equals("topic")
        FilterCommand -> FilterByTopicCommand **
        activate FilterByTopicCommand
        return

        FilterCommand -> FilterByTopicCommand : execute()
        activate FilterByTopicCommand
            alt topic == null
                FilterByTopicCommand -> FilterByTopicCommand : printAllTopics();
                activate FilterByTopicCommand
                    FilterByTopicCommand -> TopicManager : getAllCS2040CFilesGroupedByTopic()
                    activate TopicManager
                        loop topics.entrySet()
                            TopicManager -> Topic : getAllCS2040CFilesInTopic()
                            activate Topic
                            return topicCS2040CFiles : ArrayList<String>
                        end
                    return toPrintCS2040CFiles : HashMap<String, ArrayList<String>>

                    FilterByTopicCommand -> Ui : printFilterSuccess()
                    activate Ui
                    return

                    loop cs2040cFiles.entrySet()
                        FilterByTopicCommand -> System.out : println()
                        activate System.out
                        return
                    end
                return
            else else
                FilterByTopicCommand -> FilterByTopicCommand : printSingleTopic
                activate FilterByTopicCommand
                    FilterByTopicCommand -> TopicManager : getAllCS2040CFilesByTopic
                    activate TopicManager
                        TopicManager -> Topic : getAllCS2040CFilesInTopic
                        activate Topic
                        return topicCS2040CFiles : ArrayList<String>
                    return ArrayList<String>

                    FilterByTopicCommand -> Ui : printFilterSuccess()
                    activate Ui
                    return

                    loop cs2040cFiles
                        FilterByTopicCommand -> System.out : println()
                        activate System.out
                        return
                    end
                return
            end
        return
        destroy FilterByTopicCommand
    else keyWord.equals("importance")
    else else
    end
    deactivate FilterCommand
@enduml